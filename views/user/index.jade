extends ../layout

block content
  div(style="background-color:#000;margin-top:-21px;").hidden-xs: .container: .profile-header.text-center(style='height: 25px; margin-top:50px;background:linear-gradient(rgba(0,0,0,0),rgba(0,0,0,0.25)),url(' + (instructor.get('profileHeader') ? instructor.get('profileHeader').url() : '/img/instructors/default-instructor-header.png') + ');background-size:contain;background-repeat:no-repeat;background-position:left center;')
    .container(style="max-width:1170px;")
      .row: .col-xs-12.col-md-9.col-md-offset-3: .container-inner.text-left
        h1(style="font-weight:200;font-size:38px;").profile-header-user= instructor.get('name')
        p(style="font-weight:200;font-size:18px;").profile-header-bio= instructor.get('shortBio')
        p(style="font-weight:200;font-size:18px;").profile-header-bio
          if instructor.get('socialFacebook')
            a(href=instructor.get('socialFacebook'), target="_blank", style='margin:0 5px;'): i.fa.fa-facebook.fa-lg
          if instructor.get('socialTwitter')
            a(href=instructor.get('socialTwitter'), target="_blank", style='margin:0 5px;'): i.fa.fa-twitter.fa-lg
          if instructor.get('socialGoogle')
            a(href=instructor.get('socialGoogle'), target="_blank", style='margin:0 5px;'): i.fa.fa-google-plus.fa-lg
          if instructor.get('socialLinkedIn')
            a(href=instructor.get('socialLinkedIn'), target="_blank", style='margin:0 5px;'): i.fa.fa-linkedin.fa-lg
          if instructor.get('socialInstagram')
            a(href=instructor.get('socialInstagram'), target="_blank", style='margin:0 5px;'): i.fa.fa-instagram.fa-lg
          if instructor.get('socialPinterest')
            a(href=instructor.get('socialPinterest'), target="_blank", style='margin:0 5px;'): i.fa.fa-pinterest.fa-lg
          if instructor.get('socialYouTube')
            a(href=instructor.get('socialYouTube'), target="_blank", style='margin:0 5px;'): i.fa.fa-youtube.fa-lg
    .profile-header-nav
      ul.nav.nav-tabs
        li.active: a(href='#') Profile
        if courses
          li: a(href='#courses') Courses
        li: a(href="#books") Books
        li: a(href='#articles') Articles
        if instructor.get('longBio')
          li: a(href='#bio') Bio
        if instructor.get('speakerSheet')
          li: a(href=instructor.get('speakerSheet'), target='_blank') Speaker One Sheet
        if instructor.get('videoId')
          li: a(href="#" data-toggle="modal" data-target="#videoModal" id="openVideo") Video
  div(style="background-color:#000;margin-top:-21px;").hidden-sm.hidden-md.hidden-lg
    img(style="width:100%;", src=(instructor.get('profileHeader') ? instructor.get('profileHeader').url() : '/img/demo/background.png'))
    .profile-header.text-center
      .container(style="max-width:1170px;")
        .container-inner
          h1.profile-header-user= instructor.get('name')
          p.profile-header-bio= instructor.get('shortBio')
          p.profile-header-bio
            if instructor.get('socialFacebook')
              a(href=instructor.get('socialFacebook'), target="_blank", style='margin:0 5px;'): i.fa.fa-facebook.fa-lg
            if instructor.get('socialTwitter')
              a(href=instructor.get('socialTwitter'), target="_blank", style='margin:0 5px;'): i.fa.fa-twitter.fa-lg
            if instructor.get('socialGoogle')
              a(href=instructor.get('socialGoogle'), target="_blank", style='margin:0 5px;'): i.fa.fa-google-plus.fa-lg
            if instructor.get('socialLinkedIn')
              a(href=instructor.get('socialLinkedIn'), target="_blank", style='margin:0 5px;'): i.fa.fa-linkedin.fa-lg
            if instructor.get('socialInstagram')
              a(href=instructor.get('socialInstagram'), target="_blank", style='margin:0 5px;'): i.fa.fa-instagram.fa-lg
            if instructor.get('socialPinterest')
              a(href=instructor.get('socialPinterest'), target="_blank", style='margin:0 5px;'): i.fa.fa-pinterest.fa-lg
            if instructor.get('socialYouTube')
              a(href=instructor.get('socialYouTube'), target="_blank", style='margin:0 5px;'): i.fa.fa-youtube.fa-lg
      .profile-header-nav
        ul.nav.nav-tabs
          li.active: a(href='#') Profile
          if courses
            li: a(href='#courses') Courses
          li: a(href='#articles') Articles
          li: a(href='#events-products') Events & Products
          if instructor.get('longBio')
            li: a(href='#bio') Bio
          if instructor.get('speakerSheet')
            li: a(href=instructor.get('speakerSheet'), target='_blank') Speaker One Sheet
          if instructor.get('videoId')
            li: a(href="#" data-toggle="modal" data-target="#videoModal" id="openVideo") Video
  #profile.page: .container: .row
    .col-xs-10.col-xs-offset-1
      .row: .col-xs-12
        if courses
          a#courses(style="top:-55px;display:block;position:relative;visibility: hidden;")
          h2 Courses by #{instructor.get('name')}
        .row
          for course in courses
            if course.get('stage') === 'prod' || course.get('stage') === 'stage'
              include ../course/partials/card
      
      .row: .col-xs-12
        hr
        a#books(style="top:-55px;display:block;position:relative;visibility: hidden;")
        h2 Books by #{instructor.get('name')}
        .row
          for book in books
            .col-xs-12.col-sm-6.col-md-4.col-lg-3
              .course-book: a(href=book.get('link'), target='_blank'): .thumbnail
                img(src=book.get('cover'), style='height:300px').img-responsive
                .caption.text-center Order Here

      .row: .col-xs-12
        hr
        a#articles(style="top:-55px;display:block;position:relative;visibility: hidden;")
        h2 Articles by #{instructor.get('name')}
        if articles
          each article in articles
            .row(style="display : block")
              .h3-article-title-container(style='margin-left:15px')
                h3.each-article-title
                  a(href="/" + article.get('slug')).h3-article-title-text= article.get('title')
              .col-xs-2
                if article.get('thumbImage')
                  img(style="margin-top:15px;" src=article.get('thumbImage').url()).img-responsive
              .col-xs-10
                p !{libs.markdown.render(article.get('content').substring(0, 220) + ' . . .')}

                .row
                  .col-xs-3.col-sm-4.col-md-6
                    a(href="/" + article.get('slug')).btn.btn-sm.btn-primary-outline Read More
        else
          p Welcome to my instructors page “inspiration and support” area. I will be posting some amazing content to help not only support your journey but to inspire you as well. Come back often to see what I have shared.

      .row: .col-xs-12
        a#bio(style="top:-55px;display:block;position:relative;visibility: hidden;")
        if instructor.get('longBio')
          hr
          h2 #{instructor.get('name')}'s Bio
          p !{libs.markdown.render(instructor.get('longBio'))}
      
      .row: .col-xs-12
        | <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        | <!-- YWCTW Instructor Page -->
        | <ins class="adsbygoogle"
        |    style="display:inline-block;width:728px;height:90px"
        |    data-ad-client="ca-pub-9696871363163656"
        |    data-ad-slot="3846056503"></ins>
        | <script>
        | (adsbygoogle = window.adsbygoogle || []).push({});
        | </script>

  .modal.fade#videoModal(role="dialog")
    .modal-dialog.modal-lg
      .modal-content
        .modal-header
          .c
            button.close#closeButton(data-dismiss="modal") X

        .modal-body
          .embed-responsive.embed-responsive-16by9
            iframe(src=('https://player.vimeo.com/video/' + (instructor.get('videoId')) + '?autoplay=false?api=1'), width='500', height='281', frameborder='0').embed-responsive-item#instructorVideo


  block scripts
    script(src="http://a.vimeocdn.com/js/froogaloop2.min.js")
    script.
      $("#closeButton").on('click', function() {
        console.log('In close button js');
        var iframe = $("#instructorVideo")[0];
        var player = $f(iframe);
        player.api("pause");
      });

      $("body").on('click', function(){
        var iframe = $("#instructorVideo")[0];
        var player = $f(iframe);
        player.api("pause");
      });

      $("#openVideo").on('click', function() {
        console.log('In Open Video');
        var iframe = $("#instructorVideo")[0];
        var player = $f(iframe);
        player.api("play");
      });